<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestión de residuos</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link href='https://fonts.googleapis.com/css?family=Open Sans' rel='stylesheet'>
</head>

<body>
    <a href="panelAdmin.html" class="btn btn-secondary btn-lg mt-2 ml-2">Administración</a>
    <div class="container">
    
        <!-- Contenido principal -->
        <div class="main-content mt-4">
            <h1 class="text-center">Gestión de residuos</h1>
            <!-- Lista de pedidos de residuos -->
            <div class="row mt-4">
                <div class="col-lg-12">
                    <h3>Listado de residuos</h3>
                    <!-- Filtros y búsqueda -->
                    <div class="form-group row">
                        <div class="col-sm-6">
                            <select id="mes" class="form-control form-control-sm">
                                <option value="1">Enero</option>
                                <option value="2">Febrero</option>
                                <!-- Agrega opciones para todos los meses -->
                            </select>
                        </div>
                        <div class="col-sm-6">
                            <select id="anio" class="form-control form-control-sm">
                                <option value="2022">2022</option>
                                <option value="2023">2023</option>
                                <!-- Agrega opciones para años anteriores y posteriores -->
                            </select>
                        </div>
                    </div>
                    <!-- Lista de residuos -->
                    <ul id="lista-residuos" class="list-group">
                        <!-- Aquí se mostrarán los pedidos de residuos -->
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://code.jquery.com/jquery-3.6.0.js"
        integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.bundle.min.js"></script>
    <!-- Script personalizado para el panel de administración -->
    <script src="../../Controlador/js/funcionesControlador.js"></script>
    <script>
        // Script para manejar la carga de residuos según el mes y año seleccionados
        $(document).ready(function () {
            cargarResiduos($('#mes').val(), $('#anio').val());

            $('#mes, #anio').change(function () {
                cargarResiduos($('#mes').val(), $('#anio').val());
            });

            function cargarResiduos(mes, anio) {
                $.ajax({
                    url: '../../Controlador/php/categorias2.php',
                    method: 'POST',
                    data: { mes: mes, anio: anio },
                    success: function (res) {
                        // Limpiar la lista de residuos
                        $('#lista-residuos').empty();

                        // Mostrar los datos de los residuos en la lista
                        $.each(data, function (index, categoria) {
                            $('#lista-residuos').append(
                                `<li class="list-group-item">
                                    <strong>Tipo de residuo:</strong> ${categoria.descripcion}<br>
                                    <strong>Cantidad total:</strong> ${categoria.descripcion}<br>
                                    <strong>Cantidad reciclada:</strong> ${categoria.descripcion}
                                </li>`
                            );
                        });
                    },
                    error: function (err) {
                        console.error('Error al cargar residuos:', err);
                    }
                });
            }
        });
    </script>
</body>

</html>
